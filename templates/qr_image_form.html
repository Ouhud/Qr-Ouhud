{% extends "base.html" %}
{% set lang = request.state.lang if request and request.state else 'de' %}
{% if lang == 'en' %}
  {% set t_title = 'ğŸ–¼ï¸ Create image QR code â€“ Ouhud QR' %}
  {% set t_h1 = 'ğŸ–¼ï¸ Create image QR code' %}
  {% set t_sub = 'Upload an image to create a dynamic QR code. You can update the image later without changing the QR.' %}
  {% set t_label = 'ğŸ“ Label:' %}
  {% set t_file = 'ğŸ“ Select image:' %}
  {% set t_preview = 'ğŸ“· Image preview:' %}
  {% set p_label = 'Example: Product image, Event banner, Flyer ...' %}
{% elif lang == 'ar' %}
  {% set t_title = 'ğŸ–¼ï¸ Ø¥Ù†Ø´Ø§Ø¡ QR Ù„Ù„ØµÙˆØ±Ø© â€“ Ouhud QR' %}
  {% set t_h1 = 'ğŸ–¼ï¸ Ø¥Ù†Ø´Ø§Ø¡ QR Ù„Ù„ØµÙˆØ±Ø©' %}
  {% set t_sub = 'Ø§Ø±ÙØ¹ ØµÙˆØ±Ø© Ù„Ø¥Ù†Ø´Ø§Ø¡ QR Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ. ÙŠÙ…ÙƒÙ†Ùƒ ØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙˆØ±Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§ Ø¯ÙˆÙ† ØªØºÙŠÙŠØ± Ø§Ù„Ø±Ù…Ø².' %}
  {% set t_label = 'ğŸ“ Ø§Ù„ØªØ³Ù…ÙŠØ©:' %}
  {% set t_file = 'ğŸ“ Ø§Ø®ØªÙŠØ§Ø± ØµÙˆØ±Ø©:' %}
  {% set t_preview = 'ğŸ“· Ù…Ø¹Ø§ÙŠÙ†Ø© Ø§Ù„ØµÙˆØ±Ø©:' %}
  {% set p_label = 'Ù…Ø«Ø§Ù„: ØµÙˆØ±Ø© Ù…Ù†ØªØ¬ØŒ Ø¨Ø§Ù†Ø± ÙØ¹Ø§Ù„ÙŠØ©ØŒ Ù…Ù†Ø´ÙˆØ± ...' %}
{% else %}
  {% set t_title = 'ğŸ–¼ï¸ Bild-QR-Code erstellen â€“ Ouhud QR' %}
  {% set t_h1 = 'ğŸ–¼ï¸ Bild-QR-Code erstellen' %}
  {% set t_sub = 'Lade ein Bild hoch, um einen dynamischen QR-Code zu erzeugen. Du kannst spÃ¤ter das Bild aktualisieren, ohne den QR-Code zu Ã¤ndern.' %}
  {% set t_label = 'ğŸ“ Bezeichnung:' %}
  {% set t_file = 'ğŸ“ Bild auswÃ¤hlen:' %}
  {% set t_preview = 'ğŸ“· Bild-Vorschau:' %}
  {% set p_label = 'Beispiel: Produktbild, Eventbanner, Flyer â€¦' %}
{% endif %}
{% block title %}{{ t_title }}{% endblock %}

{% block content %}
<section class="qr-generator">
  <h1>{{ t_h1 }}</h1>
  <p class="subtitle">{{ t_sub }}</p>

  <form method="post" action="/qr/image/generate" enctype="multipart/form-data" class="qr-form">
    <div class="form-group">
      <label for="title">{{ t_label }}</label>
      <input type="text" id="title" name="title" placeholder="{{ p_label }}" required>
    </div>

    <div class="form-group">
      <label for="file">{{ t_file }}</label>
      <input type="file" id="file" name="file" accept="image/*" required onchange="previewImage(event)">
    </div>

    <div id="image-preview-container" style="display:none;">
      <p class="preview-label">{{ t_preview }}</p>
      <img id="image-preview" class="preview-img" alt="Image preview">
    </div>

    <hr class="divider">

    {% include "partials/qr_style_selector.html" %}
  </form>
</section>

<script>
function previewImage(event) {
  const file = event.target.files[0];
  const container = document.getElementById('image-preview-container');
  const img = document.getElementById('image-preview');
  if (file) {
    const reader = new FileReader();
    reader.onload = (e) => {
      img.src = e.target.result;
      container.style.display = 'block';
    };
    reader.readAsDataURL(file);
  }
}
</script>
{% endblock %}
