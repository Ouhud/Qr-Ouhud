{% extends "base.html" %}
{% set lang = request.state.lang if request and request.state else 'de' %}
{% if lang == 'en' %}
  {% set t_title = 'âœ… vCard created â€“ Ouhud QR' %}
  {% set t_h1 = 'âœ… vCard created successfully!' %}
  {% set t_dyn = 'Dynamic link:' %}
  {% set t_view = 'ğŸ‘ï¸ View vCard' %}
  {% set t_edit = 'âœï¸ Edit vCard' %}
  {% set t_vcf = 'ğŸ’¾ vCard (.vcf) Download' %}
  {% set t_print = 'ğŸ–¨ï¸ Print' %}
  {% set t_new = 'â• Create new vCard' %}
{% elif lang == 'ar' %}
  {% set t_title = 'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ vCard â€“ Ouhud QR' %}
  {% set t_h1 = 'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ vCard Ø¨Ù†Ø¬Ø§Ø­!' %}
  {% set t_dyn = 'Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ:' %}
  {% set t_view = 'ğŸ‘ï¸ Ø¹Ø±Ø¶ vCard' %}
  {% set t_edit = 'âœï¸ ØªØ¹Ø¯ÙŠÙ„ vCard' %}
  {% set t_vcf = 'ğŸ’¾ ØªÙ†Ø²ÙŠÙ„ vCard (.vcf)' %}
  {% set t_print = 'ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©' %}
  {% set t_new = 'â• Ø¥Ù†Ø´Ø§Ø¡ vCard Ø¬Ø¯ÙŠØ¯Ø©' %}
{% else %}
  {% set t_title = 'âœ… vCard erstellt â€“ Ouhud QR' %}
  {% set t_h1 = 'âœ… vCard erfolgreich erstellt!' %}
  {% set t_dyn = 'Dynamischer Link:' %}
  {% set t_view = 'ğŸ‘ï¸ vCard anzeigen' %}
  {% set t_edit = 'âœï¸ vCard bearbeiten' %}
  {% set t_vcf = 'ğŸ’¾ vCard (.vcf) Download' %}
  {% set t_print = 'ğŸ–¨ï¸ Drucken' %}
  {% set t_new = 'â• Neue vCard erstellen' %}
{% endif %}
{% block title %}{{ t_title }}{% endblock %}

{% block content %}
<section class="qr-generator vcard-generator qr-result-unified" style="max-width:850px;margin:2rem auto;text-align:center;">
    <h1 style="color:var(--primary);font-size:2rem;font-weight:700;margin-bottom:1rem;">{{ t_h1 }}</h1>

    {% if qr and qr.image_path %}
    <div style="margin:2rem 0;">
        <img src="/{{ qr.image_path }}" alt="QR-Code" style="width:320px;height:320px;border-radius:14px;box-shadow:0 6px 20px rgba(0,0,0,.12);">
    </div>
    {% endif %}

    {% if dynamic_url %}
    <p style="font-size:1.1rem;color:#1e293b;margin-bottom:2rem;">
        ğŸ“ <strong>{{ t_dyn }}</strong><br>
        <a href="{{ dynamic_url }}" target="_blank" style="color:var(--accent);font-weight:600;">{{ dynamic_url }}</a>
    </p>
    {% endif %}

    <div style="display:flex;justify-content:center;flex-wrap:wrap;gap:1rem;margin-top:2rem;">
        {% if qr %}
        <a href="/qr/vcard/v/{{ qr.slug }}" class="btn primary" style="padding:0.85rem 1.4rem;border-radius:12px;font-size:1rem;">{{ t_view }}</a>
        {% endif %}

        {% if qr %}
        <a href="/qr/edit/{{ qr.slug }}" class="btn secondary" style="padding:0.85rem 1.4rem;border-radius:12px;font-size:1rem;">{{ t_edit }}</a>
        {% endif %}

        {% if qr %}
        <a href="/qr/vcard/{{ qr.slug }}.vcf" class="btn primary" style="padding:0.85rem 1.4rem;border-radius:12px;font-size:1rem;">{{ t_vcf }}</a>
        {% endif %}

        {% if vcard and vcard.apple_wallet_url %}
        <a href="{{ vcard.apple_wallet_url }}" class="btn secondary" target="_blank" rel="noopener" style="padding:0.85rem 1.4rem;border-radius:12px;font-size:1rem;">ğŸ Apple Wallet</a>
        {% endif %}

        {% if vcard and vcard.google_wallet_url %}
        <a href="{{ vcard.google_wallet_url }}" class="btn secondary" target="_blank" rel="noopener" style="padding:0.85rem 1.4rem;border-radius:12px;font-size:1rem;">ğŸ¤– Google Wallet</a>
        {% endif %}

        <button type="button" class="btn secondary" onclick="return printQrFromSelector('section img')" style="padding:0.85rem 1.4rem;border-radius:12px;font-size:1rem;">{{ t_print }}</button>

        <a href="/qr/vcard/new" class="btn" style="background:#e2e8f0;padding:0.85rem 1.4rem;border-radius:12px;font-size:1rem;color:#1e293b;">{{ t_new }}</a>
    </div>
</section>
{% endblock %}
