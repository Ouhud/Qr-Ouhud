{% extends "base.html" %}
{% set lang = request.state.lang if request and request.state else 'de' %}
{% if lang == 'en' %}
  {% set t_title = 'ğŸŒ URL QR Code Generator â€“ Ouhud QR' %}
  {% set t_h1 = 'ğŸŒ URL QR Code Generator' %}
  {% set t_sub = 'Create a QR code that points to any website or online resource.' %}
  {% set t_name = 'ğŸ“ Label:' %}
  {% set t_url = 'ğŸ”— Target URL:' %}
  {% set p_name = 'e.g. My website' %}
  {% set t_done = 'ğŸ“¸ Your QR code is ready!' %}
  {% set t_print = 'ğŸ–¨ï¸ Print' %}
  {% set t_download = 'â¬‡ï¸ Download' %}
{% elif lang == 'ar' %}
  {% set t_title = 'ğŸŒ Ù…ÙˆÙ„Ø¯ QR Ù„Ù„Ø±Ø§Ø¨Ø· â€“ Ouhud QR' %}
  {% set t_h1 = 'ğŸŒ Ù…ÙˆÙ„Ø¯ QR Ù„Ù„Ø±Ø§Ø¨Ø·' %}
  {% set t_sub = 'Ø£Ù†Ø´Ø¦ Ø±Ù…Ø² QR ÙŠÙˆØ¬Ù‡ Ø¥Ù„Ù‰ Ø£ÙŠ Ù…ÙˆÙ‚Ø¹ Ø£Ùˆ Ù…ÙˆØ±Ø¯ Ø¹Ø¨Ø± Ø§Ù„Ø¥Ù†ØªØ±Ù†Øª.' %}
  {% set t_name = 'ğŸ“ Ø§Ù„ØªØ³Ù…ÙŠØ©:' %}
  {% set t_url = 'ğŸ”— Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ø³ØªÙ‡Ø¯Ù:' %}
  {% set p_name = 'Ù…Ø«Ø§Ù„: Ù…ÙˆÙ‚Ø¹ÙŠ' %}
  {% set t_done = 'ğŸ“¸ Ø±Ù…Ø² QR Ø¬Ø§Ù‡Ø²!' %}
  {% set t_print = 'ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©' %}
  {% set t_download = 'â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„' %}
{% else %}
  {% set t_title = 'ğŸŒ URL-QR-Code Generator â€“ Ouhud QR' %}
  {% set t_h1 = 'ğŸŒ URL-QR-Code Generator' %}
  {% set t_sub = 'Erstelle einen QR-Code, der zu einer beliebigen Webseite oder Online-Ressource fÃ¼hrt.' %}
  {% set t_name = 'ğŸ“ Bezeichnung:' %}
  {% set t_url = 'ğŸ”— Ziel-URL:' %}
  {% set p_name = 'z. B. Meine Webseite' %}
  {% set t_done = 'ğŸ“¸ Dein QR-Code ist fertig!' %}
  {% set t_print = 'ğŸ–¨ï¸ Drucken' %}
  {% set t_download = 'â¬‡ï¸ Herunterladen' %}
{% endif %}
{% block title %}{{ t_title }}{% endblock %}

{% block content %}
<section class="qr-generator url-generator">
  <h1>{{ t_h1 }}</h1>
  <p class="subtitle">{{ t_sub }}</p>

  {% if message %}
    <div class="alert success">
      {{ message|safe }}
    </div>
  {% endif %}

  <form method="post" action="/qr/url/generate" enctype="multipart/form-data" class="qr-form">
    <div class="form-group">
      <label for="name">{{ t_name }}</label>
      <input type="text" id="name" name="name" placeholder="{{ p_name }}" required>
    </div>

    <div class="form-group">
      <label for="url">{{ t_url }}</label>
      <input type="url" id="url" name="url" placeholder="https://example.com" required>
    </div>

    {% include "partials/qr_style_selector.html" %}
  </form>

  {% if qr_image or (qr and qr.image_path) %}
    {% set qr_img_path = "" %}
    {% if qr and qr.image_path %}
      {% set qr_img_path = qr.image_path if qr.image_path.startswith('/') else '/' + qr.image_path %}
    {% endif %}
    <hr class="divider">
    <div class="qr-preview" style="margin-top:2rem;text-align:center;">
      <h2>{{ t_done }}</h2>

      {% if qr_image %}
      <img src="{{ qr_image }}" alt="QR-Code" width="250"
           style="border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1);">
      {% elif qr.image_path %}
      <img src="{{ qr_img_path }}" alt="QR-Code" width="250"
           style="border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,0.1);">
      {% endif %}

      <div style="margin-top:1rem;">
        <button onclick="printQR()" class="btn secondary">{{ t_print }}</button>
        {% if qr and qr.image_path %}
          <a href="{{ qr_img_path }}" download class="btn primary">{{ t_download }}</a>
        {% endif %}
      </div>
    </div>
  {% endif %}
</section>

<script>
function printQR() {
  window.print();
}
</script>
{% endblock %}
