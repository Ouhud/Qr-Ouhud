{% extends "base.html" %}
{% set lang = request.state.lang if request and request.state else 'de' %}
{% if lang == 'en' %}
  {% set p_title = 'ğŸ“‹ My QR Codes â€“ Ouhud QR' %}
  {% set h1 = 'ğŸ“‹ All saved QR codes' %}
  {% set sub = 'Here you can find all QR codes you created.' %}
  {% set th_product = 'Product' %}
  {% set th_price = 'Price' %}
  {% set th_link = 'Link' %}
  {% set th_actions = 'Actions' %}
  {% set view = 'ğŸ‘ï¸ View' %}
  {% set dl = 'â¬‡ï¸ Download' %}
  {% set empty = 'ğŸ•³ï¸ No QR codes found.' %}
{% elif lang == 'ar' %}
  {% set p_title = 'ğŸ“‹ Ø±Ù…ÙˆØ² QR Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙŠ â€“ Ouhud QR' %}
  {% set h1 = 'ğŸ“‹ ÙƒÙ„ Ø±Ù…ÙˆØ² QR Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©' %}
  {% set sub = 'Ù‡Ù†Ø§ Ø³ØªØ¬Ø¯ ÙƒÙ„ Ø±Ù…ÙˆØ² QR Ø§Ù„ØªÙŠ Ø£Ù†Ø´Ø£ØªÙ‡Ø§.' %}
  {% set th_product = 'Ø§Ù„Ù…Ù†ØªØ¬' %}
  {% set th_price = 'Ø§Ù„Ø³Ø¹Ø±' %}
  {% set th_link = 'Ø§Ù„Ø±Ø§Ø¨Ø·' %}
  {% set th_actions = 'Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡Ø§Øª' %}
  {% set view = 'ğŸ‘ï¸ Ø¹Ø±Ø¶' %}
  {% set dl = 'â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„' %}
  {% set empty = 'ğŸ•³ï¸ Ù„Ø§ ØªÙˆØ¬Ø¯ Ø±Ù…ÙˆØ² QR.' %}
{% else %}
  {% set p_title = 'ğŸ“‹ Meine QR-Codes â€“ Ouhud QR' %}
  {% set h1 = 'ğŸ“‹ Alle gespeicherten QR-Codes' %}
  {% set sub = 'Hier findest du alle QR-Codes, die du erstellt hast.' %}
  {% set th_product = 'Produkt' %}
  {% set th_price = 'Preis' %}
  {% set th_link = 'Link' %}
  {% set th_actions = 'Aktionen' %}
  {% set view = 'ğŸ‘ï¸ Anzeigen' %}
  {% set dl = 'â¬‡ï¸ Download' %}
  {% set empty = 'ğŸ•³ï¸ Keine QR-Codes vorhanden.' %}
{% endif %}
{% block title %}{{ p_title }}{% endblock %}

{% block content %}
<section class="qr-list">
  <h1>{{ h1 }}</h1>
  <p class="subtitle">{{ sub }}</p>

  {% if products %}
  <table class="qr-table">
    <thead>
      <tr>
        <th>ID</th>
        <th>QR-Code</th>
        <th>{{ th_product }}</th>
        <th>{{ th_price }}</th>
        <th>{{ th_link }}</th>
        <th>{{ th_actions }}</th>
      </tr>
    </thead>
    <tbody>
      {% for p in products %}
      <tr>
        <td>{{ p.id }}</td>
        <td>{% if p.qr_image %}<img src="/{{ p.qr_image }}" class="qr-thumb" alt="QR Code">{% endif %}</td>
        <td>{{ p.name }}</td>
        <td>{{ p.price }} â‚¬</td>
        <td>{% if p.dynamic_url %}<a href="{{ p.dynamic_url }}" target="_blank">{{ p.dynamic_url }}</a>{% endif %}</td>
        <td>
          <a href="/qr/product/v/{{ p.public_id }}" class="btn-edit">{{ view }}</a>
          <a href="/{{ p.qr_image }}" download class="btn-download">{{ dl }}</a>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  {% else %}
    <p>{{ empty }}</p>
  {% endif %}
</section>

<style>
.qr-list { max-width:1000px; margin:2rem auto; background:#fff; padding:2rem; border-radius:16px; box-shadow:0 4px 12px rgba(0,0,0,0.08); font-family:"Inter",sans-serif; text-align:center; }
.subtitle { color:#666; margin-bottom:1.5rem; }
.qr-table { width:100%; border-collapse:collapse; }
.qr-table th, .qr-table td { padding:0.8rem; border-bottom:1px solid #ddd; text-align:center; vertical-align:middle; }
.qr-table th { background:#f3f6ff; color:#0D2A78; }
.qr-thumb { width:80px; height:auto; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
.btn-edit, .btn-download { display:inline-block; padding:0.4rem 0.8rem; border-radius:8px; text-decoration:none; font-size:0.9rem; font-weight:600; margin:0 0.2rem; }
.btn-edit { background:#0D2A78; color:#fff; }
.btn-download { background:#28a745; color:#fff; }
.btn-edit:hover { background:#09215d; }
.btn-download:hover { background:#1e7a35; }
</style>
{% endblock %}
