{% extends "base.html" %}
{% set lang = request.state.lang if request and request.state else 'de' %}
{% if lang == 'en' %}
  {% set t_title = 'âœ… Product QR - created successfully' %}
  {% set t_h1 = 'âœ… Product QR code created' %}
  {% set t_sub = 'Your QR code was generated and saved successfully.' %}
  {% set t_view = 'ğŸ‘ï¸ View' %}
  {% set t_download = 'â¬‡ï¸ Download PNG' %}
  {% set t_price = 'ğŸ’° Price:' %}
  {% set t_desc = 'ğŸ“ Description:' %}
  {% set t_link = 'ğŸ”— Product link:' %}
  {% set t_dyn = 'ğŸ§­ Dynamic URL:' %}
  {% set t_design = 'ğŸ¨ Design:' %}
  {% set t_style = 'Style:' %}
  {% set t_fg = 'Foreground:' %}
  {% set t_bg = 'Background:' %}
  {% set t_size = 'Size:' %}
  {% set t_new = 'â• Create new product QR' %}
  {% set t_my = 'ğŸ“‹ My QR codes' %}
  {% set t_back = 'ğŸ”™ Back to dashboard' %}
{% elif lang == 'ar' %}
  {% set t_title = 'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Product QR Ø¨Ù†Ø¬Ø§Ø­' %}
  {% set t_h1 = 'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² Product QR' %}
  {% set t_sub = 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² QR ÙˆØ­ÙØ¸Ù‡ Ø¨Ù†Ø¬Ø§Ø­.' %}
  {% set t_view = 'ğŸ‘ï¸ Ø¹Ø±Ø¶' %}
  {% set t_download = 'â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„ PNG' %}
  {% set t_price = 'ğŸ’° Ø§Ù„Ø³Ø¹Ø±:' %}
  {% set t_desc = 'ğŸ“ Ø§Ù„ÙˆØµÙ:' %}
  {% set t_link = 'ğŸ”— Ø±Ø§Ø¨Ø· Ø§Ù„Ù…Ù†ØªØ¬:' %}
  {% set t_dyn = 'ğŸ§­ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ:' %}
  {% set t_design = 'ğŸ¨ Ø§Ù„ØªØµÙ…ÙŠÙ…:' %}
  {% set t_style = 'Ø§Ù„Ù†Ù…Ø·:' %}
  {% set t_fg = 'Ø§Ù„Ù„ÙˆÙ† Ø§Ù„Ø£Ù…Ø§Ù…ÙŠ:' %}
  {% set t_bg = 'Ù„ÙˆÙ† Ø§Ù„Ø®Ù„ÙÙŠØ©:' %}
  {% set t_size = 'Ø§Ù„Ø­Ø¬Ù…:' %}
  {% set t_new = 'â• Ø¥Ù†Ø´Ø§Ø¡ Product QR Ø¬Ø¯ÙŠØ¯' %}
  {% set t_my = 'ğŸ“‹ Ø±Ù…ÙˆØ² QR Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙŠ' %}
  {% set t_back = 'ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…' %}
{% else %}
  {% set t_title = 'âœ… Produkt-QR â€“ Erfolgreich erstellt' %}
  {% set t_h1 = 'âœ… Produkt-QR-Code wurde erstellt' %}
  {% set t_sub = 'Dein QR-Code wurde erfolgreich generiert und gespeichert.' %}
  {% set t_view = 'ğŸ‘ï¸ Anzeigen' %}
  {% set t_download = 'â¬‡ï¸ Download PNG' %}
  {% set t_price = 'ğŸ’° Preis:' %}
  {% set t_desc = 'ğŸ“ Beschreibung:' %}
  {% set t_link = 'ğŸ”— Produktlink:' %}
  {% set t_dyn = 'ğŸ§­ Dynamische URL:' %}
  {% set t_design = 'ğŸ¨ Design:' %}
  {% set t_style = 'Stil:' %}
  {% set t_fg = 'Vordergrundfarbe:' %}
  {% set t_bg = 'Hintergrundfarbe:' %}
  {% set t_size = 'GrÃ¶ÃŸe:' %}
  {% set t_new = 'â• Neuen Produkt-QR erstellen' %}
  {% set t_my = 'ğŸ“‹ Meine QR-Codes' %}
  {% set t_back = 'ğŸ”™ ZurÃ¼ck zum Dashboard' %}
{% endif %}
{% block title %}{{ t_title }}{% endblock %}
{% block content %}
{% include "partials/qr_result_warnings.html" %}

<section class="max-w-4xl mx-auto p-8 bg-white rounded-3xl shadow-lg font-[Inter] qr-result-unified">
  <header class="mb-8 text-center">
    <h1 class="text-3xl font-bold text-[var(--primary)] flex justify-center items-center gap-2">{{ t_h1 }}</h1>
    <p class="text-gray-500 mt-2">{{ t_sub }}</p>
  </header>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-start">
    <div class="text-center">
      {% if qr_image %}
        <img src="data:image/png;base64,{{ qr_image }}" alt="QR Code" class="w-full rounded-2xl shadow-md border border-gray-200">
      {% elif product.qr_image %}
        <img src="/{{ product.qr_image }}" alt="QR Code" class="w-full rounded-2xl shadow-md border border-gray-200">
      {% endif %}

      <div class="mt-4 flex flex-wrap justify-center gap-3">
        <a href="/qr/product/v/{{ product.public_id }}" class="px-4 py-2 rounded-xl bg-[var(--primary)] text-white font-semibold shadow hover:bg-[var(--primary-dark)]">{{ t_view }}</a>

        <a href="/{{ product.qr_image }}" download class="px-4 py-2 rounded-xl bg-emerald-600 text-white font-semibold shadow hover:bg-emerald-700">{{ t_download }}</a>
      </div>
    </div>

    <div class="p-6 bg-gray-50 rounded-2xl border">
      <h2 class="text-xl font-bold text-gray-800 mb-4">{{ product.name }}</h2>

      <ul class="space-y-2 text-gray-700">
        <li><strong>{{ t_price }}</strong> {{ '%.2f'|format(product.price) }} â‚¬</li>

        {% if product.description %}
        <li><strong>{{ t_desc }}</strong><br>{{ product.description }}</li>
        {% endif %}

        {% if product.link %}
        <li>
          <strong>{{ t_link }}</strong><br>
          <a href="{{ product.link }}" class="text-blue-700 underline break-words" target="_blank">{{ product.link }}</a>
        </li>
        {% endif %}

        <li>
          <strong>{{ t_dyn }}</strong><br>
          <a href="{{ dynamic_url }}" class="text-blue-700 underline break-words" target="_blank">{{ dynamic_url }}</a>
        </li>

        <li>
          <strong>{{ t_design }}</strong>
          <div class="mt-1">
            {{ t_style }} <span class="font-semibold">{{ product.style }}</span><br>
            {{ t_fg }} <span class="font-semibold">{{ product.fg_color }}</span><br>
            {{ t_bg }} <span class="font-semibold">{{ product.bg_color }}</span><br>
            {{ t_size }} <span class="font-semibold">{{ product.qr_size }} px</span>
          </div>
        </li>
      </ul>
    </div>
  </div>

  <div class="mt-10 flex flex-wrap justify-center gap-4">
    <a href="/qr/product/" class="px-5 py-3 rounded-xl bg-gray-200 text-gray-800 shadow hover:bg-gray-300">{{ t_new }}</a>

    <a href="/qr/my" class="px-5 py-3 rounded-xl bg-[var(--primary)] text-white shadow font-semibold hover:bg-[var(--primary-dark)]">{{ t_my }}</a>

    <a href="/dashboard" class="px-5 py-3 rounded-xl bg-gray-200 text-gray-800 shadow hover:bg-gray-300">{{ t_back }}</a>
  </div>
</section>

<style>
  :root {
    --primary: #0d2a78;
    --primary-dark: #0b1742;
  }
</style>

{% endblock %}
