{% extends "base.html" %}
{% set lang = request.state.lang if request and request.state else 'de' %}
{% if lang == 'en' %}
  {% set t_title = 'âœ… Multi-Link QR - created successfully' %}
  {% set t_h1 = 'âœ… Multi-Link QR code created' %}
  {% set t_sub = 'Your QR code was generated and saved successfully.' %}
  {% set t_view = 'ğŸ‘ï¸ View' %}
  {% set t_download = 'â¬‡ï¸ Download PNG' %}
  {% set t_dyn = 'ğŸ§­ Dynamic URL:' %}
  {% set t_design = 'ğŸ¨ Design:' %}
  {% set t_new = 'â• Create new Multi-Link QR' %}
  {% set t_my = 'ğŸ“‹ My QR codes' %}
  {% set t_back = 'ğŸ”™ Back to dashboard' %}
{% elif lang == 'ar' %}
  {% set t_title = 'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Multi-Link QR Ø¨Ù†Ø¬Ø§Ø­' %}
  {% set t_h1 = 'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² Multi-Link QR' %}
  {% set t_sub = 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² QR ÙˆØ­ÙØ¸Ù‡ Ø¨Ù†Ø¬Ø§Ø­.' %}
  {% set t_view = 'ğŸ‘ï¸ Ø¹Ø±Ø¶' %}
  {% set t_download = 'â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„ PNG' %}
  {% set t_dyn = 'ğŸ§­ Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ:' %}
  {% set t_design = 'ğŸ¨ Ø§Ù„ØªØµÙ…ÙŠÙ…:' %}
  {% set t_new = 'â• Ø¥Ù†Ø´Ø§Ø¡ Multi-Link QR Ø¬Ø¯ÙŠØ¯' %}
  {% set t_my = 'ğŸ“‹ Ø±Ù…ÙˆØ² QR Ø§Ù„Ø®Ø§ØµØ© Ø¨ÙŠ' %}
  {% set t_back = 'ğŸ”™ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù„ÙˆØ­Ø© Ø§Ù„ØªØ­ÙƒÙ…' %}
{% else %}
  {% set t_title = 'âœ… Multi-Link-QR â€“ Erfolgreich erstellt' %}
  {% set t_h1 = 'âœ… Multi-Link-QR-Code wurde erstellt' %}
  {% set t_sub = 'Dein QR-Code wurde erfolgreich generiert und gespeichert.' %}
  {% set t_view = 'ğŸ‘ï¸ Anzeigen' %}
  {% set t_download = 'â¬‡ï¸ Download PNG' %}
  {% set t_dyn = 'ğŸ§­ Dynamische URL:' %}
  {% set t_design = 'ğŸ¨ Design:' %}
  {% set t_new = 'â• Neuen Multi-Link-QR erstellen' %}
  {% set t_my = 'ğŸ“‹ Meine QR-Codes' %}
  {% set t_back = 'ğŸ”™ ZurÃ¼ck zum Dashboard' %}
{% endif %}
{% block title %}{{ t_title }}{% endblock %}
{% block content %}
{% include "partials/qr_result_warnings.html" %}

<section class="max-w-4xl mx-auto p-8 bg-white rounded-3xl shadow-lg font-[Inter] qr-result-unified">
  <header class="mb-8 text-center">
    <h1 class="text-3xl font-bold text-[var(--primary)] flex justify-center items-center gap-2">{{ t_h1 }}</h1>
    <p class="text-gray-500 mt-2">{{ t_sub }}</p>
  </header>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-10 items-start">
    <div class="text-center">
      {% if qr_image %}
        <img src="data:image/png;base64,{{ qr_image }}" alt="QR Code" class="w-full rounded-2xl shadow-md border border-gray-200">
      {% endif %}

      <div class="mt-4 flex flex-wrap justify-center gap-3">
        <a href="{{ dynamic_url }}" target="_blank" class="px-4 py-2 rounded-xl bg-[var(--primary)] text-white font-semibold shadow hover:bg-[var(--primary-dark)]">{{ t_view }}</a>

        {% if qr and qr.slug %}
        <a href="/qr/export/{{ qr.slug }}?format=png" download="multilink_qr.png" class="px-4 py-2 rounded-xl bg-emerald-600 text-white font-semibold shadow hover:bg-emerald-700">{{ t_download }}</a>
        {% else %}
        <a href="data:image/png;base64,{{ qr_image }}" download="multilink_qr.png" class="px-4 py-2 rounded-xl bg-emerald-600 text-white font-semibold shadow hover:bg-emerald-700">{{ t_download }}</a>
        {% endif %}
      </div>
    </div>

    <div class="p-6 bg-gray-50 rounded-2xl border">
      <h2 class="text-xl font-bold text-gray-800 mb-4">{{ qr.title or "Multi-Link" }}</h2>

      <ul class="space-y-2 text-gray-700">
        <li>
          <strong>{{ t_dyn }}</strong><br>
          <a href="{{ dynamic_url }}" class="text-blue-700 underline break-words" target="_blank">{{ dynamic_url }}</a>
        </li>

        <li><strong>{{ t_design }}</strong> {{ qr.style }}</li>
      </ul>
    </div>
  </div>

  <div class="mt-10 flex flex-wrap justify-center gap-4">
    <a href="/qr/multilink/" class="px-5 py-3 rounded-xl bg-gray-200 text-gray-800 shadow hover:bg-gray-300">{{ t_new }}</a>

    <a href="/qr/my" class="px-5 py-3 rounded-xl bg-[var(--primary)] text-white shadow font-semibold hover:bg-[var(--primary-dark)]">{{ t_my }}</a>

    <a href="/dashboard" class="px-5 py-3 rounded-xl bg-gray-200 text-gray-800 shadow hover:bg-gray-300">{{ t_back }}</a>
  </div>
</section>

<style>
  :root {
    --primary: #0d2a78;
    --primary-dark: #0b1742;
  }
</style>

{% endblock %}
