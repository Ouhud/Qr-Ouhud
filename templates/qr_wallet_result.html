{% extends "base.html" %}
{% set lang = request.state.lang if request and request.state else 'de' %}
{% if lang == 'en' %}
  {% set t_title = 'Wallet QR created' %}
  {% set t_h1 = 'âœ… Wallet QR created' %}
  {% set t_sub = 'This QR uses a dynamic redirect and can open Apple or Google Wallet depending on the device.' %}
  {% set t_open = 'Open wallet pass' %}
  {% set t_edit = 'Edit' %}
  {% set t_print = 'ğŸ–¨ï¸ Print' %}
{% elif lang == 'ar' %}
  {% set t_title = 'ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Wallet QR' %}
  {% set t_h1 = 'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Wallet QR' %}
  {% set t_sub = 'ÙŠØ³ØªØ®Ø¯Ù… Ù‡Ø°Ø§ Ø§Ù„Ø±Ù…Ø² Ø¥Ø¹Ø§Ø¯Ø© ØªÙˆØ¬ÙŠÙ‡ Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØ© ÙˆÙŠÙ…ÙƒÙ†Ù‡ ÙØªØ­ Apple Ø£Ùˆ Google Wallet Ø­Ø³Ø¨ Ø§Ù„Ø¬Ù‡Ø§Ø².' %}
  {% set t_open = 'ÙØªØ­ Ø¨Ø·Ø§Ù‚Ø© Wallet' %}
  {% set t_edit = 'ØªØ¹Ø¯ÙŠÙ„' %}
  {% set t_print = 'ğŸ–¨ï¸ Ø·Ø¨Ø§Ø¹Ø©' %}
{% else %}
  {% set t_title = 'Wallet QR erstellt' %}
  {% set t_h1 = 'âœ… Wallet-QR erstellt' %}
  {% set t_sub = 'Der QR-Code nutzt eine dynamische Weiterleitung und kann je nach GerÃ¤t Apple oder Google Wallet Ã¶ffnen.' %}
  {% set t_open = 'Wallet Pass Ã¶ffnen' %}
  {% set t_edit = 'Bearbeiten' %}
  {% set t_print = 'ğŸ–¨ï¸ Drucken' %}
{% endif %}
{% block title %}{{ t_title }}{% endblock %}
{% block content %}
{% include "partials/qr_result_warnings.html" %}
<section class="qr-generator qr-result-unified" style="text-align:center;">
  <h1>{{ t_h1 }}</h1>
  {% if qr_image %}<img src="data:image/png;base64,{{ qr_image }}" style="max-width:300px;border-radius:12px;">{% endif %}
  <p>{{ t_sub }}</p>
  <p><a href="{{ dynamic_url }}" target="_blank" rel="noopener">{{ dynamic_url }}</a></p>
  <div style="display:flex;justify-content:center;gap:0.8rem;flex-wrap:wrap;margin-top:1rem;">
    <a href="{{ dynamic_url }}" target="_blank" rel="noopener" class="btn primary">{{ t_open }}</a>
    {% if qr %}
      <a href="/qr/edit/{{ qr.slug }}" class="btn secondary">{{ t_edit }}</a>
    {% endif %}
    <button type="button" class="btn secondary" onclick="return printQrFromSelector('section img')">{{ t_print }}</button>
  </div>
</section>
{% endblock %}
