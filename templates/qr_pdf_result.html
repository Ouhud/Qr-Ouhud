{% extends "base.html" %}
{% set lang = request.state.lang if request and request.state else 'de' %}
{% if lang == 'en' %}
  {% set t_title = 'ğŸ“„ PDF QR Code Result' %}
  {% set t_h1 = 'âœ… QR code created successfully' %}
  {% set t_sub = 'Your PDF has been saved and a dynamic QR code was created.' %}
  {% set t_view = 'ğŸ“„ View PDF' %}
  {% set t_dyn = 'Dynamic link:' %}
  {% set t_download = 'â¬‡ï¸ Download QR code' %}
{% elif lang == 'ar' %}
  {% set t_title = 'ğŸ“„ Ù†ØªÙŠØ¬Ø© QR Ù„Ù…Ù„Ù PDF' %}
  {% set t_h1 = 'âœ… ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² QR Ø¨Ù†Ø¬Ø§Ø­' %}
  {% set t_sub = 'ØªÙ… Ø­ÙØ¸ Ù…Ù„Ù PDF ÙˆØ¥Ù†Ø´Ø§Ø¡ Ø±Ù…Ø² QR Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ.' %}
  {% set t_view = 'ğŸ“„ Ø¹Ø±Ø¶ PDF' %}
  {% set t_dyn = 'Ø§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ:' %}
  {% set t_download = 'â¬‡ï¸ ØªÙ†Ø²ÙŠÙ„ Ø±Ù…Ø² QR' %}
{% else %}
  {% set t_title = 'ğŸ“„ PDF-QR-Code Ergebnis' %}
  {% set t_h1 = 'âœ… QR-Code erfolgreich erstellt' %}
  {% set t_sub = 'Dein PDF wurde gespeichert und ein dynamischer QR-Code wurde erzeugt.' %}
  {% set t_view = 'ğŸ“„ PDF ansehen' %}
  {% set t_dyn = 'Dynamischer Link:' %}
  {% set t_download = 'â¬‡ï¸ QR-Code herunterladen' %}
{% endif %}
{% block title %}{{ t_title }}{% endblock %}

{% block content %}
<section class="qr-result-section">
  <h1>{{ t_h1 }}</h1>
  <p class="subtitle">{{ t_sub }}</p>

  <div class="qr-result-card">
    <img src="data:image/png;base64,{{ qr_image }}" alt="QR-Code Vorschau" class="qr-preview">
    <p><strong>{{ qr.title if qr else '' }}</strong></p>
    {% if dynamic_url %}
      <p><a href="{{ dynamic_url }}" target="_blank" class="btn-link">{{ t_view }}</a></p>
      <p class="link-hint">{{ t_dyn }} {{ dynamic_url }}</p>
    {% endif %}
    <p><a href="data:image/png;base64,{{ qr_image }}" download="qr_pdf.png" class="btn-link">{{ t_download }}</a></p>
  </div>
</section>

<style>
.qr-result-section {
  max-width: 700px;
  margin: 3rem auto;
  background: #fff;
  padding: 2.5rem;
  border-radius: 20px;
  box-shadow: 0 6px 25px rgba(0,0,0,0.08);
  text-align: center;
  font-family: "Inter", system-ui, sans-serif;
}
h1 {color:#0D2A78;font-size:1.8rem;margin-bottom:1rem;}
.subtitle {color:#475569;margin-bottom:2rem;}
.qr-preview {max-width:260px;border-radius:12px;box-shadow:0 3px 15px rgba(0,0,0,0.1);}
.btn-link {
  display:inline-block;
  margin:0.5rem;
  padding:0.75rem 1.2rem;
  background:linear-gradient(135deg,#0D2A78,#1E40AF);
  color:white;
  text-decoration:none;
  border-radius:10px;
  font-weight:600;
  transition:background .3s ease;
}
.btn-link:hover {background:linear-gradient(135deg,#0B1742,#1E3A8A);}
.link-hint {font-size:0.9rem;color:#475569;word-break:break-all;margin-top:0.5rem;}
</style>
{% endblock %}
