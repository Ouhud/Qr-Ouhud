{% extends "base.html" %}
{% set lang = request.state.lang if request and request.state else 'de' %}
{% if lang == 'en' %}
  {% set p_title = 'Reset password | Ouhud QR' %}
  {% set p_h2 = 'ğŸ” Set new password' %}
  {% set p_sub = 'Enter your new password and confirm it.' %}
  {% set p_pw = 'New password' %}
  {% set p_pw2 = 'Confirm password' %}
  {% set p_submit = 'Save password' %}
{% elif lang == 'ar' %}
  {% set p_title = 'Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± | Ouhud QR' %}
  {% set p_h2 = 'ğŸ” ØªØ¹ÙŠÙŠÙ† ÙƒÙ„Ù…Ø© Ù…Ø±ÙˆØ± Ø¬Ø¯ÙŠØ¯Ø©' %}
  {% set p_sub = 'Ø£Ø¯Ø®Ù„ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© Ø«Ù… Ø£ÙƒØ¯Ù‡Ø§.' %}
  {% set p_pw = 'ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ± Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø©' %}
  {% set p_pw2 = 'ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±' %}
  {% set p_submit = 'Ø­ÙØ¸ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±' %}
{% else %}
  {% set p_title = 'Passwort zurÃ¼cksetzen | Ouhud QR' %}
  {% set p_h2 = 'ğŸ” Neues Passwort setzen' %}
  {% set p_sub = 'Bitte gib ein neues Passwort ein und bestÃ¤tige es.' %}
  {% set p_pw = 'Neues Passwort' %}
  {% set p_pw2 = 'Passwort bestÃ¤tigen' %}
  {% set p_submit = 'Passwort speichern' %}
{% endif %}
{% block title %}{{ p_title }}{% endblock %}

{% block content %}
<section class="reset-section">
  <div class="reset-card">
    <img src="/static/logo.png" alt="Ouhud QR" class="reset-logo">
    <h2>{{ p_h2 }}</h2>
    <p class="subtitle">{{ p_sub }}</p>

    {% if error %}
      <div class="error-msg">{{ error }}</div>
    {% endif %}

    <form method="post" action="/auth/reset-password" class="reset-form">
      <input type="hidden" name="token" value="{{ token }}">
      <div class="form-group">
        <label for="new_password">{{ p_pw }}</label>
        <input type="password" id="new_password" name="new_password" required>
      </div>
      <div class="form-group">
        <label for="confirm_password">{{ p_pw2 }}</label>
        <input type="password" id="confirm_password" name="confirm_password" required>
      </div>

      <button type="submit" class="reset-button">{{ p_submit }}</button>
    </form>
  </div>
</section>

<style>
.reset-section { display:flex; justify-content:center; align-items:center; min-height:95vh; background:linear-gradient(135deg,#0D2A78,#1E44B5); font-family:"Inter",system-ui,sans-serif; }
.reset-card { background:#fff; border-radius:20px; box-shadow:0 8px 28px rgba(0,0,0,0.08); padding:2.8rem 3rem; max-width:420px; width:100%; text-align:center; }
.reset-logo { width:80px; height:auto; margin-bottom:1rem; }
h2 { font-size:1.6rem; font-weight:700; color:#0D2A78; margin-bottom:0.3rem; }
.subtitle { color:#64748B; font-size:0.95rem; margin-bottom:1.6rem; }
.reset-form { display:flex; flex-direction:column; gap:1rem; text-align:left; }
.form-group label { font-weight:600; font-size:0.95rem; color:#334155; margin-bottom:0.3rem; display:block; }
.form-group input { width:100%; padding:0.75rem; border-radius:10px; border:1px solid #e2e8f0; font-size:0.95rem; transition:all 0.25s ease; }
.form-group input:focus { border-color:#2563EB; box-shadow:0 0 6px rgba(37,99,235,0.2); outline:none; }
.reset-button { margin-top:1rem; background:linear-gradient(135deg,#0D2A78,#1E44B5); color:white; font-weight:600; border:none; border-radius:10px; padding:0.9rem; cursor:pointer; font-size:1rem; transition:all 0.25s ease-in-out; }
.reset-button:hover { background:linear-gradient(135deg,#0B2163,#183D9B); }
.error-msg { color:#EF4444; background:#FFECEC; border-radius:10px; padding:0.7rem; font-size:0.9rem; margin-bottom:1.2rem; font-weight:500; text-align:center; }
@media (max-width:480px) { .reset-card { padding:2rem 1.5rem; } h2 { font-size:1.4rem; } }
</style>
{% endblock %}
